# pymongo-api

## Как запустить

Запускаем mongodb и приложение

```shell
docker compose up -d
```

Заполняем mongodb данными

```shell
./scripts/mongo-init.sh
```

## Как проверить

### Если вы запускаете проект на локальной машине

Откройте в браузере http://localhost:8080

### Если вы запускаете проект на предоставленной виртуальной машине

Узнать белый ip виртуальной машины

```shell
curl --silent http://ifconfig.me
```

Откройте в браузере http://<ip виртуальной машины>:8080

## Доступные эндпоинты

Список доступных эндпоинтов, swagger http://<ip виртуальной машины>:8080/docs

## Поставленные задачи

### Задание 1. Планирование

- **Схема 1** (_/drawio/scheme_1.drawio_) - использование шардирование в MongoDB для  повышения производительности
- **Схема 2** (_/drawio/scheme_2.drawio_) - реализация репликации MongoDB для повышения отказоустойчивости
- **Схема 3** (_/drawio/scheme_3.drawio_) - реализация кеширования для ещё большего повышения производительности

### Задание 2. Шардирование

Задание реализовано в директории `mongo-sharding`.

Был модифицирован compose.yaml таким образом, чтобы реализовать первый вариант схемы.    
В файле `mongo-sharding/README.md` описаны шаги для инициализации шардирования в MongoDB и шаги для тестирования шардирования.

### Задание 3. Репликация

Задание реализовано в директории `mongo-sharding-repl`.

Был модифицирован compose.yaml таким образом, чтобы реализовать второй вариант схемы.    
В файле `mongo-sharding-repl/README.md` описаны шаги для настройки репликацию и методы проверки.

### Задание 4. Кеширование

Задание реализовано в директории `sharding-repl-cache`.

Был модифицирован compose.yaml таким образом, чтобы реализовать третий вариант схемы.  
В файле `sharding-repl-cache/README.md` описаны шаги для запуска и настройки проекта.

### Задание 5. Service Discovery и балансировка с API Gateway

**Схема 4** (_/drawio/scheme_4.drawio_) - реализация горизонтального масштабирования приложения. В схему 3 были добавлены API Gateway для балансировки и Consul для Service Discovery.

### Задание 6. CDN

**Схема 5** (_/drawio/scheme_5.drawio_) - к схеме 4 добавлено использование CDN